var $ = require('jquery');
var Backbone = require('backbone');
var _ = require('underscore');

Backbone.$ = $;


var ProjectsListCollectionClass = require('projectsList/ProjectsListCollection');
var projectsListCollection = new ProjectsListCollectionClass();

var ProjectsListItemClass = require('projectsListItem/ProjectsListItem');
var projectsListItem = new ProjectsListCollectionClass();


module.exports = Backbone.View.extend({

  events: {
    "click li" : "selectProject"
  },

  initialize: function () {
    var _this = this;
    this.render();
  },

  render: function () {
    var _this = this;
    projectsListCollection.fetch({
      success: function (datas) {
        for (var i = 0; i < datas.length; i++) {
          projectsListItem = new ProjectsListItemClass({ model: datas.get(i) });
          _this.$el.append(projectsListItem.render().el);
        };

      }
    });
  },

  selectProject: function(e) {
    $(e.currentTarget).find('a').addClass("seen");
  }
});